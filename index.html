<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <title>Quà 20/10 - Ngày Phụ nữ Việt Nam</title>
    <meta name="description" content="Trang quà tặng 20/10 dành cho Ngày Phụ nữ Việt Nam: mở hộp quà và đọc một bức thư yêu thương.">
    <meta property="og:title" content="Quà 20/10 - Ngày Phụ nữ Việt Nam">
    <meta property="og:description" content="Mở hộp quà và đọc một bức thư yêu thương. Chúc mừng Ngày Phụ nữ Việt Nam 20/10!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="index.html">
    <meta property="og:image" content="giftimage.png"> 
    <meta property="og:image:alt" content="Quà 20/10 - Ngày Phụ nữ Việt Nam">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --pink-glow: rgba(255, 105, 180, 0.35);
            --pink-glow-strong: rgba(255, 105, 180, 0.65);
            --primary-red: #d62828;
            --light-pink: #f08080;
            --lighter-pink: #f4978e;
            --cream-yellow: #eae2b7;
            --dark-blue: #003049;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html{ height: 100%; overflow: hidden; }
        body {
            height: 100vh; width: 100vw; position: relative; overflow: hidden;
            font-family: 'Dancing Script', cursive;
            -webkit-touch-callout: none; -webkit-user-select: none; -ms-user-select: none; user-select: none;
            touch-action: manipulation; /* Improved touch responsiveness */
        }
        .background-image{ 
            position: absolute; width: 100%; height: 100%; object-fit: cover; z-index: 1;
            /* Tối ưu ảnh nền cho di động */
            will-change: transform, opacity; /* Hints for browser optimization */
            image-rendering: -webkit-optimize-contrast; /* For crisper images */
        }
        .corner-image, .corner-image-right, .bottom-left-right, .heart1, .heart2 {
            position: absolute;
            object-fit: contain; /* Changed to contain for better mobile scaling */
            transition: transform 0.3s ease, opacity 0.5s ease;
            z-index: 1;
            /* Tối ưu ảnh trang trí */
            will-change: transform, opacity;
        }
        .corner-image { width: 60vw; height: auto; } /* Auto height to maintain aspect ratio */
        .corner-image-right { width: 90vw; height: auto; }
        .bottom-left-right { width: 50vw; height: auto; bottom: -10vh; right: -20vw; z-index: 2; transform:rotate(-20deg); }
        .heart1 { width: 30vw; height: auto; bottom: -8vh; right: 5vw; }
        .heart2 { width: 20vw; height: auto; bottom: 35vh; right: 22vw; transform: rotate(-19deg); }
        .bottom-left { bottom: 0; left: -19vw; }
        .bottom-right { bottom: 0; right: -19vw; }
        
        @property --scale { syntax: '<number>'; inherits: false; initial-value: 1; }
        .heart1, .heart2{ transform: rotate(var(--rot, 0deg)) scale(var(--scale, 1)); }
        .heart1{ --rot: 0deg; } .heart2{ --rot: -19deg; }
        @keyframes heartbeat { 0%, 100% { --scale: 1; } 25% { --scale: 1.06; } 50% { --scale: 0.98; } 75% { --scale: 1.06; } }

        .boxgift{ 
            position: absolute; top: 60%; left: 50%; transform: translate(-50%, -50%) scale(var(--scale, 1)); z-index: 3; 
            width: min(12vw, 110px); aspect-ratio: 1 / 1; cursor: pointer;
            will-change: transform;
        }
        .boxgift .box-gift{ position: absolute; left: 50%; transform: translateX(-50%); width: 100%; height: auto; }
        .boxgift .base{ bottom: 0; z-index: 1; }
        .boxgift .lid{ bottom: 60%; z-index: 2; transform-origin: center; transition: transform .7s ease-out; }
        @keyframes giftPulse { 0%, 100% { --scale: 1; } 50% { --scale: 1.08; } }
        body.is-loaded .boxgift{ animation: giftPulse 1.2s ease-in-out .4s infinite; }
        .boxgift.open .lid{ transform: translateX(-50%) translateY(-55%) rotate(-20deg); }

        @keyframes floatY { 0% { transform: translateY(0); } 100% { transform: translateY(-10px); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .headline{ 
            position: absolute; top: 20%; left: 50%; transform: translate(-50%, -50%); z-index: 3; 
            width: 92vw; text-align: center; font-weight: 700; font-size: clamp(32px, 7.6vw, 104px); 
            line-height: 1.5; padding: 0 2vw; 
            background: linear-gradient(90deg,#ff77aa,#f70e8e,#b9515f); background-size: 300% 100%; 
            -webkit-background-clip: text; background-clip: text; color: transparent; 
            filter: drop-shadow(0 6px 18px var(--pink-glow)); opacity: 0;
            will-change: opacity, transform, filter, background-position;
        }
        @keyframes gradientShift { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }
        @keyframes glowPulse { 0%, 100% { filter: drop-shadow(0 6px 18px var(--pink-glow)); } 50% { filter: drop-shadow(0 10px 26px var(--pink-glow-strong)); } }
        body.is-loaded .headline{ animation: fadeIn .9s ease-out .3s forwards, gradientShift 6s linear .9s infinite, glowPulse 2.4s ease-in-out .9s infinite; }
        
        body:not(.is-loaded) .background-image, body:not(.is-loaded) .corner-image, body:not(.is-loaded) .corner-image-right, body:not(.is-loaded) .heart1, body:not(.is-loaded) .heart2{ opacity: 0; }
        body.is-loaded .background-image{ animation: fadeIn .6s ease-out forwards; }
        body.is-loaded .corner-image{ animation: fadeIn .8s ease-out forwards, floatY 6s ease-in-out .8s infinite alternate; }
        body.is-loaded .corner-image-right{ animation: fadeIn .9s ease-out forwards, floatY 7s ease-in-out .9s infinite alternate; }
        body.is-loaded .heart1{ animation: fadeIn 1s ease-out forwards, heartbeat 1.5s ease-in-out 1.1s infinite; }

        body.hide-ui .corner-image, body.hide-ui .corner-image-right, body.hide-ui .bottom-left-right, body.hide-ui .heart1, body.hide-ui .heart2, body.hide-ui .headline, body.hide-ui .boxgift{ opacity: 0 !important; pointer-events: none !important; transition: opacity .4s ease !important; }
        
        #pageLoader{ 
            position: absolute; inset: 0; z-index: 1000; display: none; align-items: center; justify-content: center; 
            background: rgba(0,0,0,.45);
            /* Tối ưu Loader */
            backdrop-filter: blur(5px); /* Modern blur effect */
            -webkit-backdrop-filter: blur(5px);
        }
        #pageLoader.show{ display: flex; }
        #pageLoader .wrap{ display: flex; flex-direction: column; align-items: center; gap: 14px; }
        #pageLoader .spinner{ width: 64px; height: 64px; border: 6px solid rgba(211, 7, 234, 0.35); border-top-color: #a317a5; border-radius: 50%; animation: spin 1s linear infinite; }
        #pageLoader .text{ color: hsl(296, 97%, 65%); font-family: system-ui, sans-serif; font-size: 20px; text-align: center; padding: 0 16px; }
        @keyframes spin{ to{ transform: rotate(360deg);} }

        /* ---------- SCENE PHONG THƯ ---------- */
        #letterScene{ position: absolute; inset: 0; z-index: 10; display: none; }
        #letterScene *{ margin: 0; padding: 0; box-sizing: border-box; } /* Ensure box-sizing applies here too */
        
        /* Loại bỏ các phần không cần thiết cho bố cục mới */
        #letterScene #theSvg { display: none; } /* Ẩn SVG chạy chữ */
        #letterScene .valentines{ position: relative; cursor: pointer; animation: up 3s linear infinite; z-index: 1; margin: auto; top: 0; bottom: 0; left: 0; right: 0; }
        @keyframes up{ 0%,100%{ transform: translateY(0);} 50%{ transform: translateY(-30px);} }
        
        /* Điều chỉnh kích thước phong bì cho di động */
        #letterScene .envelope{ width: 260px; height: 170px; background-color: var(--light-pink); margin: 0 auto; }
        #letterScene .envelope:before{ 
            background-color: var(--light-pink); content: ""; position: absolute; 
            width: 180px; height: 180px; transform: rotate(45deg); 
            top: -90px; left: 40px; border-radius: 30px 0 0 0; 
        }
        #letterScene .card{ 
            position: absolute; background-color: var(--cream-yellow); 
            width: 230px; height: 140px; top: 5px; left: 15px; 
            box-shadow: -3px -3px 50px rgba(0,0,0,0.3); /* Nhẹ nhàng hơn */
        }
        #letterScene .card:before{ content: ""; position: absolute; border: 2px dotted var(--dark-blue); width: 200px; height: 110px; left: 10px; top: 10px; }
        #letterScene .text{ 
            position: absolute; font-size: 24px; text-align: center; line-height: 1.2; 
            color: var(--dark-blue); width: 100%; top: 50%; left: 50%; transform: translate(-50%, -50%); 
            padding: 0 8px; font-weight: 700;
        }
        #letterScene .heart{ 
            background-color: var(--primary-red); display: inline-block; height: 25px; margin: 0 8px; 
            position: relative; top: 90px; left: 90px; transform: rotate(-45deg); width: 25px; 
        }
        #letterScene .heart:before, #letterScene .heart:after{ content: ""; background-color: var(--primary-red); border-radius: 50%; height: 25px; position: absolute; width: 25px; }
        #letterScene .heart:before{ top: -12.5px; left: 0; } #letterScene .heart:after{ left: 12.5px; top: 0; }
        #letterScene .hearts{ position: absolute; }
        #letterScene .one, #letterScene .two, #letterScene .three, #letterScene .four, #letterScene .five{ 
            background-color: var(--primary-red); display: inline-block; height: 8px; margin: 0 8px; 
            position: relative; transform: rotate(-45deg); width: 8px; top: 40px; 
        }
        #letterScene .one:before, #letterScene .one:after, #letterScene .two:before, #letterScene .two:after, #letterScene .three:before, #letterScene .three:after, #letterScene .four:before, #letterScene .four:after, #letterScene .five:before, #letterScene .five:after{ content: ""; background-color: var(--primary-red); border-radius: 50%; height: 8px; position: absolute; width: 8px; }
        #letterScene .one:before, #letterScene .two:before, #letterScene .three:before, #letterScene .four:before, #letterScene .five:before{ top: -4px; left: 0; }
        #letterScene .one:after, #letterScene .two:after, #letterScene .three:after, #letterScene .four:after, #letterScene .five:after{ left: 4px; top: 0; }
        #letterScene .one{ left: 10px; animation: heart 1s ease-out infinite; } #letterScene .two{ left: 30px; animation: heart 2s ease-out infinite; } #letterScene .three{ left: 50px; animation: heart 1.5s ease-out infinite; } #letterScene .four{ left: 70px; animation: heart 2.3s ease-out infinite; } #letterScene .five{ left: 90px; animation: heart 1.7s ease-out infinite; }
        @keyframes heart{ 0%{ transform: translateY(0) rotate(-45deg) scale(0.3); opacity: 1;} 100%{ transform: translateY(-120px) rotate(-45deg) scale(1.1); opacity: 0.5;} }
        #letterScene .front{ 
            position: absolute; border-right: 150px solid var(--lighter-pink); border-top: 80px solid transparent; 
            border-bottom: 85px solid transparent; left: 110px; top: 5px; width: 0; height: 0; z-index: 10; 
        }
        #letterScene .front:before{ 
            position: absolute; content: ""; border-left: 260px solid #f8ad9d; border-top: 170px solid transparent; 
            left: -110px; top: -80px; width: 0; height: 0; 
        }
        #letterScene .shadow{ /* BÓNG ĐỔ CỦA PHONG BÌ */
            position: absolute; width: 280px; height: 20px; border-radius: 50%; 
            background-color: rgba(0,0,0,0.3); top: 215px; left: -10px; 
            animation: scaleShadow 3s linear infinite; z-index: -1; 
        }
        @keyframes scaleShadow{ 0%,100%{ transform: scaleX(1);} 50%{ transform: scaleX(0.85);} }
        #letterScene #castle{ display: flex; justify-content: center; align-items: center; height: 100vh; background-color: transparent; }
        
        #letterScene .wrapperLetterForm{ 
            position: absolute; inset: 0; z-index: 1000; display: none; align-items: center; justify-content: center; 
            background: rgba(0,0,0,0.7);
            /* Tối ưu backdrop cho thư */
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        #letterScene .boxLetter{ width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
        
        /* THAY ĐỔI LỚN: Phóng to thư và tối ưu cho di động */
        #letterScene .boxLetter .formLetter{ 
            position: relative; 
            width: 95vw; /* Tăng chiều rộng để tận dụng màn hình */
            height: 90vh; /* Tăng chiều cao */
            max-width: 800px; /* Giới hạn tối đa trên desktop */
            max-height: 900px; /* Giới hạn tối đa trên desktop */
            background-color: #FFEBEB; border-radius: 20px; z-index: 100; padding: min(20px, 4vw) min(15px, 3vw); 
            box-shadow: rgba(0,0,0,0.24) 0px 3px 8px;
            display: flex; /* Dùng flexbox để căn chỉnh nội dung */
            flex-direction: column; /* Xếp theo cột */
            align-items: center;
            justify-content: space-between; /* Đẩy nội dung và chữ ký ra hai đầu */
        }
        #letterScene .formLetter .wrapperLetter{ 
            position: relative; width: 100%; height: 100%; border: 2px dashed #FF6666; border-radius: inherit; 
            display: flex; flex-direction: column; align-items: center; justify-content: flex-start; /* Nội dung bắt đầu từ trên */
            padding-bottom: 60px; /* Khoảng trống cho chữ ký */
            overflow: hidden; /* Ẩn các phần thừa */
        }
        #letterScene .formLetter .heartLetter{ 
            position: absolute; width: 30px; height: 30px; border-radius: 50%; background: #FFEBEB; 
            display: flex; justify-content: center; align-items: center; z-index: 10; 
        }
        #letterScene .heartLetter:first-child{ right: 5px; top: 10px; } #letterScene .heartLetter:nth-child(2){ left: 5px; bottom: 10px; }
        #letterScene .heartLetter .heartLetterItem{ position: relative; width: 10px; height: 10px; transform: rotate(45deg); background: #FF6666; }
        #letterScene .heartLetterItem::before, #letterScene .heartLetterItem::after{ position: absolute; content: ''; width: 100%; height: 100%; border-radius: 50%; background: inherit; }
        #letterScene .heartLetterItem::before{ top: -50%; } #letterScene .heartLetterItem::after{ left: -50%; }
        
        #letterScene .giftbox{ /* Ẩn hẳn giftbox khỏi bức thư */
            display: none; 
        }

        #letterScene .textLetter{ 
            width: 100%; display: flex; flex-direction: column; align-items: center; user-select: text; 
            flex-grow: 1; /* Cho phép phần text này mở rộng để chứa nội dung */
        }
        #letterScene .textLetter h2{ 
            font-size: clamp(28px, 6vw, 40px); font-weight: 700; text-align: center; 
            padding: 0 min(15px, 3vw); margin-top: min(15px, 3vw); margin-bottom: min(10px, 2vw);
        }
        #letterScene .textLetter .contentLetter{ 
            font-size: clamp(16px, 3.8vw, 24px); text-align: left; 
            padding: 0 min(35px, 6vw); margin-top: min(15px, 3vw); 
            word-break: break-word; overflow-wrap: anywhere; white-space: pre-wrap; 
            max-height: calc(100% - 100px); /* Điều chỉnh max-height để vừa vặn hơn, chừa chỗ cho tiêu đề và chữ ký */
            overflow-y: auto; -webkit-overflow-scrolling: touch; 
            line-height: 1.6; /* Tăng line-height cho dễ đọc */
            padding-bottom: min(10px, 2vw); /* Thêm padding dưới */
        }
        /* Cải thiện thanh cuộn cho contentLetter */
        #letterScene .textLetter .contentLetter::-webkit-scrollbar { width: 6px; }
        #letterScene .textLetter .contentLetter::-webkit-scrollbar-thumb { background-color: #f8ad9d; border-radius: 3px; }
        #letterScene .textLetter .contentLetter::-webkit-scrollbar-track { background-color: #ffebebd0; }

        #letterScene .fa-xmark{ position: absolute; right: 20px; top: 20px; color: #fff; cursor: pointer; font-size: 25px; z-index: 101; }
        #letterScene .letterCloseBtn{
            position: absolute; right: min(15px, 3vw); bottom: min(15px, 3vw); z-index: 12;
            width: min(50px, 10vw); height: min(50px, 10vw); border-radius: 50%; border: none; cursor: pointer;
            background: #FF6666; color: #fff; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 6px 14px rgba(0,0,0,0.18); font-size: clamp(18px, 4vw, 24px);
            transition: transform 0.2s ease;
        }
        #letterScene .letterCloseBtn:active{ transform: scale(0.9); }
        
        #letterScene .mewmew1, #letterScene .mewmew2{ position: absolute; width: min(90px, 18vw); bottom: 0; }
        #letterScene .mewmew1{ left: min(0px, -2vw); } 
        #letterScene .mewmew2{ right: min(0px, -2vw); }
        #letterScene .mewmew1 img, #letterScene .mewmew2 img{ width: 100%; }
        #letterScene .signature{ 
            position: absolute; bottom: min(20px, 4vw); right: min(80px, 15vw); 
            font-weight: 700; font-size: clamp(18px, 4vw, 24px); color: #FF6666; 
            font-style: italic; text-align: right; z-index: 5;
            width: auto; /* Để chữ ký có thể co giãn tự nhiên */
            white-space: nowrap; /* Đảm bảo chữ ký không bị ngắt dòng */
        }
        
        /* Media Queries cho các kích thước màn hình cụ thể */
        @media (min-width: 1024px) { /* Tablet ngang và desktop */
            .boxgift { width: 110px; top: 58%; }
            .heart1 { width: 15vw; right: 8vw; }
            .heart2 { width: 10vw; right: 25vw; bottom: 40vh; }
            .headline { font-size: 72px; top: 22%; }
            #letterScene .envelope { width: 300px; height: 200px; }
            #letterScene .envelope:before { width: 212px; height: 212px; top: -105px; left: 44px; }
            #letterScene .card { width: 270px; height: 170px; left: 15px; }
            #letterScene .card:before { width: 240px; height: 140px; left: 12px; top: 12px; }
            #letterScene .text { font-size: 28px; }
            #letterScene .heart { height: 30px; width: 30px; top: 110px; left: 105px; }
            #letterScene .heart:before, #letterScene .heart:after { height: 30px; width: 30px; }
            #letterScene .heart:before { top: -15px; } #letterScene .heart:after { left: 15px; }
            #letterScene .hearts .one, #letterScene .hearts .two, #letterScene .hearts .three, #letterScene .hearts .four, #letterScene .hearts .five { height: 10px; width: 10px; top: 50px; }
            #letterScene .hearts .one:before, #letterScene .hearts .one:after,
            #letterScene .hearts .two:before, #letterScene .hearts .two:after,
            #letterScene .hearts .three:before, #letterScene .hearts .three:after,
            #letterScene .hearts .four:before, #letterScene .hearts .four:after,
            #letterScene .hearts .five:before, #letterScene .hearts .five:after { height: 10px; width: 10px; }
            #letterScene .hearts .one:before { top: -5px; } #letterScene .hearts .one:after { left: 5px; }
            #letterScene .front { border-right: 180px solid var(--lighter-pink); border-top: 95px solid transparent; border-bottom: 100px solid transparent; left: 120px; top: 5px; }
            #letterScene .front:before { border-left: 300px solid #f8ad9d; border-top: 195px solid transparent; left: -120px; top: -95px; }
            #letterScene .shadow { width: 330px; height: 25px; top: 265px; left: -15px; }
            #letterScene .boxLetter .formLetter { width: 70vw; height: 80vh; max-width: 800px; max-height: 900px; padding: 25px 20px; }
            #letterScene .textLetter h2 { font-size: 40px; margin-top: 20px; margin-bottom: 15px; }
            #letterScene .textLetter .contentLetter { font-size: 24px; padding: 0 40px; max-height: calc(100% - 120px); }
            #letterScene .letterCloseBtn { width: 50px; height: 50px; font-size: 24px; right: 20px; bottom: 20px; }
            #letterScene .mewmew1, #letterScene .mewmew2 { width: 100px; }
            #letterScene .signature { font-size: 24px; right: 90px; bottom: 25px; }
        }

        @media (max-width: 768px){ /* Tablet dọc và điện thoại lớn */
            .headline{ top: calc(17% + env(safe-area-inset-top, 0px)); font-size: clamp(26px, 7.2vw, 64px); }
            .boxgift{ width: min(40vw, 170px); top: 64%; }
            .corner-image{ width: 70vw; }
            .corner-image-right{ width: 110vw; right: -24vw; }
            .corner-image.bottom-left{ left: -24vw; }
            .heart1{ width: 38vw; }
            .heart2{ width: 24vw; right: 12vw; bottom: 36vh; }
            
            #letterScene .boxLetter .formLetter { width: 95vw; height: 90vh; padding: 3vw; }
            #letterScene .textLetter h2 { font-size: clamp(24px, 5vw, 32px); margin-top: 2vw; margin-bottom: 1.5vw; }
            #letterScene .textLetter .contentLetter { font-size: clamp(15px, 3.5vw, 20px); padding: 0 4vw; max-height: calc(100% - 90px); }
            #letterScene .signature{ right: 15vw; bottom: 3vw; font-size: clamp(16px, 3.5vw, 20px); }
            #letterScene .letterCloseBtn { width: 9vw; height: 9vw; font-size: 4vw; right: 3vw; bottom: 3vw; }
        }

        @media (max-width: 480px){ /* Điện thoại nhỏ */
            .headline{ top: calc(14% + env(safe-area-inset-top, 0px)); font-size: clamp(24px, 8.8vw, 56px); line-height: 1.2; padding: 0 4vw; }
            .boxgift{ width: min(26vw, 80px); top: 45%; }
            .heart1{ width: 52vw; bottom: 3vh;right: 0; }
            .heart2{ width: 28vw; bottom: 20vh; right: 8vw; }
            .corner-image-right{ width: 128vw; right: -2vw; }
            .corner-image.bottom-left{ left: -6vw; }
            .bottom-left-right{ display: none; } /* Ẩn đi trên màn hình nhỏ nhất */

            #letterScene .envelope { width: 220px; height: 140px; }
            #letterScene .envelope:before { width: 150px; height: 150px; top: -75px; left: 35px; }
            #letterScene .card { width: 190px; height: 110px; left: 10px; }
            #letterScene .card:before { width: 160px; height: 80px; left: 8px; top: 8px; }
            #letterScene .text { font-size: 20px; }
            #letterScene .heart { height: 20px; width: 20px; top: 70px; left: 75px; }
            #letterScene .heart:before, #letterScene .heart:after { height: 20px; width: 20px; }
            #letterScene .heart:before { top: -10px; } #letterScene .heart:after { left: 10px; }
            #letterScene .hearts .one, #letterScene .hearts .two, #letterScene .hearts .three, #letterScene .hearts .four, #letterScene .hearts .five { height: 7px; width: 7px; top: 35px; }
            #letterScene .hearts .one:before, #letterScene .hearts .one:after,
            #letterScene .hearts .two:before, #letterScene .hearts .two:after,
            #letterScene .hearts .three:before, #letterScene .hearts .three:after,
            #letterScene .hearts .four:before, #letterScene .hearts .four:after,
            #letterScene .hearts .five:before, #letterScene .hearts .five:after { height: 7px; width: 7px; }
            #letterScene .hearts .one:before { top: -3.5px; } #letterScene .hearts .one:after { left: 3.5px; }
            #letterScene .front { border-right: 120px solid var(--lighter-pink); border-top: 60px solid transparent; border-bottom: 65px solid transparent; left: 90px; top: 5px; }
            #letterScene .front:before { border-left: 220px solid #f8ad9d; border-top: 140px solid transparent; left: -90px; top: -60px; }
            #letterScene .shadow { width: 250px; height: 18px; top: 180px; left: -10px; }

            #letterScene .boxLetter .formLetter { width: 95vw; height: 95vh; padding: 2.5vw; }
            #letterScene .textLetter h2 { font-size: clamp(22px, 4.5vw, 28px); margin-top: 1.5vw; margin-bottom: 1vw; }
            #letterScene .textLetter .contentLetter { font-size: clamp(14px, 3.2vw, 18px); padding: 0 3vw; max-height: calc(100% - 80px); }
            #letterScene .signature{ right: 10vw; bottom: 2.5vw; font-size: clamp(15px, 3.2vw, 18px); }
            #letterScene .letterCloseBtn { width: 8vw; height: 8vw; font-size: 3.5vw; right: 2.5vw; bottom: 2.5vw; }
        }

        @media (prefers-reduced-motion: reduce){ 
            body *, #letterScene * { transition: none !important; animation: none !important; }
        }
    </style>
</head>
<body>    
    <img src="image/bg.png" alt="Ảnh nền" class="background-image">
    <img src="image/b3.png" alt="Ảnh trang trí" class="corner-image bottom-left">
    <img src="image/b3.png" alt="Ảnh trang trí" class="corner-image bottom-left-right">
    <img src="image/b4.png" alt="Ảnh trang trí" class="corner-image-right bottom-right">
    <img src="image/b6.png" alt="Ảnh trang trí trái tim" class="heart1">
    <img src="image/b5.png" alt="Ảnh trang trí trái tim" class="heart2">
    
    <h1 class="headline">Mừng Ngày Phụ Nữ Việt Nam</h1>

    <div id="letterScene">
        <div id="castle">
            <div class="letter">
                <div class="valentines">
                    <div class="envelope"></div>
                    <div class="front"></div>
                    <div class="card">
                        <div class="text">Mở thư ra<br>đọc nhé!</div>
                        <div class="heart"></div>
                    </div>
                    <div class="hearts">
                        <div class="one"></div> <div class="two"></div> <div class="three"></div> <div class="four"></div> <div class="five"></div>
                    </div>
                </div>
                <div class="shadow"></div>
            </div>
        </div>

        <div class="wrapperLetterForm" style="display: none;">
            <i class="fa-solid fa-xmark"></i>
            <div class="boxLetter">
                <div class="formLetter">
                    <div class="heartLetter"> <div class="heartLetterItem"></div> </div>
                    <div class="heartLetter"> <div class="heartLetterItem"></div> </div>
                    <div class="wrapperLetter">
                        <div class="textLetter">
                            <h2></h2>
                            <p class="contentLetter"></p>
                        </div>
                        <div class="mewmew1"> <img src="./image/mewmew.gif" alt=""> </div>
                        <div class="mewmew2"> <img src="./image/mewmew.gif" alt=""> </div>
                        <div class="signature"></div>
                    </div>
                    <button class="letterCloseBtn" title="Đã đọc" aria-label="Đã đọc">
                        <i class="fa-solid fa-check"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="pageLoader" class="show">
        <div class="wrap">
            <div class="spinner"></div>
            <div class="text">Đang chuẩn bị quà...</div>
        </div>
    </div>
    <div class="boxgift" id="giftBox">
        <img src="image/nap.png" alt="Nắp hộp" class="box-gift lid">
        <img src="image/hop.png" alt="Thân hộp" class="box-gift base">
    </div>

    <div id="player"></div>

    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="./detect-devtools.js"></script>
    <script type='text/javascript'>
        DisableDevtool({ tkName: 'key', md5: '9ac7ec230e0e4513578f309d6d3579ad', interval: '100' });
    </script>
    
    <script>
       // --------- Khu vực tùy chỉnh nội dung ---------
       const config = {
           // THAY ID VIDEO YOUTUBE BẠN MUỐN PHÁT LÀM NHẠC NỀN
           youtubeId: 'jfKfPfyJRdk', 
           
           // TIÊU ĐỀ THƯ
           titleLetter: 'Gửi người phụ nữ tuyệt vời nhất!',
           
           // NỘI DUNG THƯ (DÀI VÀ Ý NGHĨA)
           contentLetter: `Hôm nay, ngày 20 tháng 10, là một dịp đặc biệt để tôi có thể bày tỏ lòng biết ơn và sự trân trọng sâu sắc đến bạn – người phụ nữ đã luôn thầm lặng tô điểm cho cuộc đời này thêm rực rỡ.

Có lẽ sẽ chẳng có ngôn từ nào đủ đầy để nói hết về những cống hiến và hy sinh của bạn. Bạn là hiện thân của sự dịu dàng nhưng cũng ẩn chứa một nội lực phi thường. Bạn là dòng sông êm đềm vỗ về những tâm hồn, nhưng cũng là ngọn núi vững chãi trước bão giông. Bạn vừa là người giữ lửa cho tổ ấm, vừa là người thắp lên những ước mơ và hoài bão lớn lao.

Thế giới này, và cả cuộc đời tôi, sẽ thật trống trải và vô vị biết bao nếu thiếu đi nụ cười, sự quan tâm và tình yêu thương của bạn. Cảm ơn bạn vì đã luôn là chính bạn – một phiên bản độc nhất và tuyệt vời.

Nhân ngày đặc biệt này, tôi không chúc bạn những điều quá cao xa. Tôi chỉ thật tâm mong rằng:
- Mong bạn có những khoảnh khắc thật sự bình yên cho riêng mình, để lắng nghe và yêu chiều tâm hồn.
- Mong nụ cười của bạn luôn nở rộ trên môi, không chỉ hôm nay mà trong tất cả 365 ngày của một năm.
- Mong bạn luôn đủ mạnh mẽ để vượt qua mọi thử thách, nhưng cũng đủ dịu dàng để cho phép bản thân được yếu đuối khi cần.
- Và hơn hết, mong bạn luôn nhận ra giá trị của bản thân và được sống một cuộc đời trọn vẹn, hạnh phúc theo đúng cách bạn mong muốn.

Cảm ơn vì tất cả.`,
           
           // CHỮ KÝ CUỐI THƯ
           signatureLetter: 'Từ trái tim'
       };

       // --------- Phần xử lý code (không cần chỉnh sửa) ---------
       (function(){
           const pageLoader = document.getElementById('pageLoader');
           function showLoader(){ pageLoader && pageLoader.classList.add('show'); document.body.classList.remove('is-loaded'); }
           function hideLoader(){ pageLoader && pageLoader.classList.remove('show'); }
           function applyData(data){
               if(document.querySelector('#letterScene .textLetter h2')) document.querySelector('#letterScene .textLetter h2').textContent = data.titleLetter || '';
               if(document.querySelector('#letterScene .contentLetter')) document.querySelector('#letterScene .contentLetter').textContent = data.contentLetter || '';
               if(document.querySelector('#letterScene .signature')) document.querySelector('#letterScene .signature').innerHTML = data.signatureLetter || '';
           }
           showLoader();
           setTimeout(() => {
               try{ applyData(config); hideLoader(); document.body.classList.add('is-loaded'); }
               catch(e){ console.error('Config data error:', e); hideLoader(); document.body.classList.add('is-loaded'); }
           }, 1500); 
       })();

       (function(){
           const box = document.getElementById('giftBox');
           if(!box) return;
           let opened = false;
           function openBox(){
               if(opened) return;
               opened = true;
               box.classList.add('open');
               if (window.player && typeof window.player.playVideo === 'function') {
                   try { window.player.setVolume(60); window.player.playVideo(); } 
                   catch (e) { console.error("Lỗi khi phát video YouTube:", e); }
               }
               setTimeout(() => {
                   document.body.classList.add('hide-ui');
                   const scene = document.getElementById('letterScene');
                   if(scene){ scene.style.display = 'flex'; } /* Changed to flex to center content */
                   initLetterScene();
               }, 1000);
           }
           box.addEventListener('click', openBox, { passive: true });
       })();

       function initLetterScene(){
           try{
               function typeWriter(element, text, speed, callback) {
                   let i = 0; element.innerHTML = '';
                   function type() {
                       if (i < text.length) {
                           element.innerHTML += text.charAt(i); i++;
                           setTimeout(type, speed);
                       } else if (callback) { callback(); }
                   }
                   type();
               }

               const $ = window.jQuery;
               if($){
                   $('.valentines').off('mouseenter mouseleave').on('mouseenter', function(){ $('.card').stop(true, true).animate({ top: '-90px' }, 'slow'); }).on('mouseleave', function(){ $('.card').stop(true, true).animate({ top: 0 }, 'slow'); });
                   $('.card').off('click').on('click', function(){
                       $('.wrapperLetterForm').fadeIn();
                       const titleEl = document.querySelector('#letterScene .textLetter h2');
                       const contentEl = document.querySelector('#letterScene .contentLetter');
                       if (config.titleLetter && config.contentLetter) {
                           typeWriter(titleEl, config.titleLetter, 80, () => {
                               typeWriter(contentEl, config.contentLetter, 50);
                           });
                       }
                   });
                   $('.letterCloseBtn, .fa-xmark').off('click').on('click', function(){
                       $('.wrapperLetterForm').fadeOut();
                   });
               }
           }catch(err){ console.error("Error in letter scene:", err); }
       }
    </script>

    <script>
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        window.player;
        function onYouTubeIframeAPIReady() {
            window.player = new YT.Player('player', {
                height: '0', width: '0',
                videoId: config.youtubeId || 'jfKfPfyJRdk',
                playerVars: { 'autoplay': 0, 'controls': 0, 'loop': 1, 'playlist': config.youtubeId || 'jfKfPfyJRdk' }
            });
        }
    </script>
</body>
</html>
